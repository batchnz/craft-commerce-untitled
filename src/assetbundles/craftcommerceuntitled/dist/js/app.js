(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ZpdD:function(t,e,i){"use strict";i.r(e);var s=i("Kw5r"),a=i("L2JU");const n=(t="",e={})=>{const i=new URLSearchParams(e).toString();return`${Craft.getSiteUrl()+Craft.CommerceUntitled.pluginHandle}/api/${Craft.CommerceUntitled.apiVersion}/${t+(i.length>0?"?"+i:"")}`};var r=async(t={})=>await fetch(n("variant-configurations",t)),l=async(t={})=>await fetch(n("variant-configuration-types/fields",t)),o=async(t={})=>await fetch(n("variant-configurations"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)}),c=async(t,e={})=>await fetch(n(`variant-configurations/${t}/variants/generate`),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)});const d=["price","stock","sku"],u=["all","skip","field"];var p=i("UGp+");const v={header:{title:"Variant Configurator",subtitle:"Select or create a variant configuration"},footer:{priBtnText:"Next Step",secBtnText:"Previous"},rules:Object(p.e)({})},f={component:"IndexStep",header:v.header,footer:{priBtnText:"Create New",secBtnText:"Cancel"},rules:v.rules},h={component:"NameStep",header:{...v.header,subtitle:"Step 1. Set the configuration name"},footer:v.footer,rules:Object(p.e)().shape({title:Object(p.f)().required("Please enter a configuration name")})},_={component:"FieldsStep",header:{...v.header,subtitle:"Step 2. Select the fields to generate variants from"},footer:v.footer,rules:Object(p.e)().shape({fields:Object(p.b)().of(Object(p.f)()).min(1,"Please select at least one field")})},m={component:"ValuesStep",header:{...v.header,subtitle:"Step 3. Select the values to generate variants from"},footer:v.footer,rules:Object(p.e)().shape({values:Object(p.b)().of(Object(p.f)()).min(1,"Please select at least one value")})},g=t=>{const e={},i=x.getters.settingsByType(t);if(null==i.field)return Object(p.e)(e);const s=x.getters.selectedOptionValuesByFieldHandle[i.field];return null==s||s.forEach(i=>{switch(t){case"price":case"stock":default:e[i]=Object(p.d)().typeError("Please enter a number").required("Please enter a value").min(0,"Please enter a value greater than 0");break;case"sku":e[i]=Object(p.f)().typeError("Please enter a value").required("Please enter a value").nullable()}}),Object(p.e)(e)},S=t=>{switch(t){case"price":case"stock":default:return Object(p.e)({value:Object(p.d)().typeError("Please enter a number").required("Please enter a value").min(0,"Please enter a value greater than 0")});case"sku":return Object(p.e)({value:Object(p.f)().typeError("Please enter a number").required("Please enter a value").min(0,"Please enter a value greater than 0").nullable()})}},y={component:"SettingsStep",header:{...v.header,subtitle:"Step 4. Set the configuration settings"},footer:{...v.footer,priBtnText:"Save Configuration"},rules:Object(p.e)().shape({settings:((t=d)=>{const e={};return t.forEach(t=>{e[t]=Object(p.e)({method:Object(p.f)().nullable().required().oneOf(u,"Please select an option"),field:Object(p.f)().when("method",{is:"field",then:Object(p.f)().nullable().required("Please select a field")}).nullable(),values:Object(p.e)().when("method",{is:"field",then:Object(p.c)(()=>g(t))}).when("method",{is:"all",then:Object(p.c)(()=>S(t))}).nullable()})}),Object(p.e)(e)})()})},T={component:"GenerateStep",header:{...v.header,subtitle:"Step 5. Generate your variants"},footer:{...v.footer,priBtnText:"Generate Variants"},rules:v.rules};var b={indexStep:f,nameStep:h,fieldsStep:_,valuesStep:m,settingsStep:y,generateStep:T};function C(){this.listeners={},this.oneTimeListeners={}}C.prototype.on=function(t,e,i=null){return I(t,e,i,this.listeners)},C.prototype.once=function(t,e,i=null){return I(t,e,i,this.oneTimeListeners)},C.prototype.emit=async function(t){let e;return e=O(this.listeners[t]),!1===e||(e=O(this.oneTimeListeners[t],!0)),e},C.prototype.off=function(t,e){E(this.listeners[t],e),E(this.oneTimeListeners[t],e)};const I=(t,e,i,s)=>{null===i&&"function"==typeof e&&(i=e,e=null),Array.isArray(s[t])||(s[t]=[]),i.bind(e),s[t].push(i)},O=async(t=[],e=!1)=>{let i=null;for(var s=0;s<t.length;s++)if("function"==typeof t[s]&&(i=await t[s](),e&&t.splice(s,1),!1===i))return i;return i},E=(t=[],e=(()=>{}))=>{for(var i=0;i<t.length;i++)t[i]===e&&t.splice(i,1)};var A=new C;s.a.use(a.a);const N={method:null,field:null,values:{}},F=()=>{const t={};return d.forEach(e=>{t[e]={...N}}),t},V=()=>({id:null,title:"",fields:[],values:[],settings:F()}),j=(t=[])=>{Array.isArray(t)||(t=[t]),t.forEach(t=>{let e=[];for(const[i,s]of Object.entries(t.values))e=e.concat(t.values[i]);t.values=e})};var x=new a.a.Store({state:{ui:{isLoading:!1,isSubmitting:!1,isCompleted:!1},step:0,totalSteps:5,formErrors:{},productId:null,productTypeId:null,typeId:null,variantConfiguration:V(),variantConfigurations:[],variantConfigurationTypeFields:[]},mutations:{SET_PRODUCT_ID(t,e){t.productId=e},SET_PRODUCT_TYPE_ID(t,e){t.productTypeId=e},SET_TYPE_ID(t,e){t.typeId=e},SET_VARIANT_CONFIGURATIONS(t,e){t.variantConfigurations=e},UPDATE_VARIANT_CONFIGURATIONS(t,e){t.variantConfigurations.forEach((i,s)=>{i.id===e.id&&(t.variantConfigurations[s]={...i,...e})})},SET_VARIANT_CONFIGURATION_TYPE_FIELDS(t,e){t.variantConfigurationTypeFields=e},SET_IS_LOADING(t,e=!0){t.ui.isLoading=e},SET_IS_SUBMITTING(t,e=!0){t.ui.isSubmitting=e},SET_IS_COMPLETED(t,e=!0){t.ui.isCompleted=e},SET_VARIANT_CONFIGURATION(t,e){t.variantConfiguration={...e}},UPDATE_VARIANT_CONFIGURATION(t,e){t.variantConfiguration={...t.variantConfiguration,...e}},SET_VARIANT_CONFIGURATION_TITLE(t,e){t.variantConfiguration.title=e},SET_VARIANT_CONFIGURATION_FIELDS(t,e){t.variantConfiguration.fields=e},SET_VARIANT_CONFIGURATION_VALUES(t,e){t.variantConfiguration.values=e},SET_VARIANT_CONFIGURATION_SETTINGS(t,e){t.variantConfiguration.settings=e},SET_VARIANT_CONFIGURATION_SETTINGS_TYPE(t,{type:e,data:i}){t.variantConfiguration.settings[e]||(t.variantConfiguration.settings[e]={}),t.variantConfiguration.settings={...t.variantConfiguration.settings,[e]:{...t.variantConfiguration.settings[e],...N,...i}}},SET_STEP(t,e){t.step=e},SET_FORM_ERRORS(t,e){t.formErrors=e}},actions:{async resetForm({commit:t,dispatch:e}){e("createNewVariantConfiguration"),t("SET_IS_COMPLETED",!1),t("SET_STEP",0)},async saveVariantConfiguration({commit:t,state:e,getters:i,dispatch:s}){t("SET_IS_SUBMITTING",!0);const a={};Object.keys(i.fieldValuesByHandle).forEach(t=>{a[t]=i.selectedOptionValuesByFieldHandle[t]||[]});const n=await o({...e.variantConfiguration,values:a,productId:e.productId,typeId:e.typeId}),{data:r}=await n.json();j(r),t("SET_VARIANT_CONFIGURATION",r),t("UPDATE_VARIANT_CONFIGURATIONS",r),t("SET_IS_SUBMITTING",!1)},async generateVariants({commit:t},e){t("SET_IS_SUBMITTING",!0);await c(e);t("SET_IS_SUBMITTING",!1)},async setCurrentVariantConfigurationById({commit:t,state:e},i){const s=e.variantConfigurations.find(t=>t.id===i);if(null==s)throw new Error("Variant Configuration not found");t("SET_VARIANT_CONFIGURATION",s),t("SET_STEP",1)},async fetchVariantConfigurations({commit:t},e){const i=await r(e),{data:s}=await i.json();j(s),t("SET_VARIANT_CONFIGURATIONS",s)},async fetchVariantConfigurationTypeFields({commit:t},e){const i=await l(e),{data:s}=await i.json();t("SET_VARIANT_CONFIGURATION_TYPE_FIELDS",s)},async toggleAllSelectedFields({commit:t,getters:e,state:i}){if(e.isAllFieldsSelected)return t("SET_VARIANT_CONFIGURATION_FIELDS",[]);const s=[];i.variantConfigurationTypeFields.forEach(t=>{s.push(t.handle)}),t("SET_VARIANT_CONFIGURATION_FIELDS",s)},async toggleAllSelectedValues({commit:t,getters:e,state:i},s){const a=e.fieldValuesByHandle[s];if(!a.length)return;let n=[];const r=i.variantConfiguration.values;n=e.isAllValuesSelected(s)?r.filter(t=>-1===a.indexOf(t)):[...r,...a],t("SET_VARIANT_CONFIGURATION_VALUES",n)},async nextStep({commit:t,getters:e,state:i,dispatch:s}){const{rules:a}=e.currentStepState;if(!await s("validate",{schema:a,values:i.variantConfiguration}))return;!1!==await A.emit("form-submission")&&(i.step>=i.totalSteps||t("SET_STEP",i.step+1))},async prevStep({commit:t,state:e}){e.step<0||t("SET_STEP",e.step-1)},async menuStep({commit:t,dispatch:e}){e("resetForm")},async validate({commit:t,getters:e,state:i},{schema:s,values:a}){try{t("SET_FORM_ERRORS",{}),await s.validate(a,{abortEarly:!1})}catch(e){return e.inner&&e.inner.forEach(e=>{t("SET_FORM_ERRORS",{...i.formErrors,[e.path]:e.message})}),!1}return!0},async createNewVariantConfiguration({commit:t,dispatch:e}){await e("clearFormErrors"),t("SET_VARIANT_CONFIGURATION",V())},async clearFormErrors({commit:t}){t("SET_FORM_ERRORS",{})}},getters:{settingsByType:t=>e=>t.variantConfiguration.settings[e]||{},isAllFieldsSelected(t){const e=t.variantConfigurationTypeFields.map(t=>t.handle);return e.filter(e=>t.variantConfiguration.fields.includes(e)).length===e.length},isAllValuesSelected:(t,e)=>i=>{const s=e.fieldValuesByHandle[i];return s.filter(e=>t.variantConfiguration.values.includes(e)).length===s.length},selectedFields:t=>t.variantConfigurationTypeFields.filter(e=>t.variantConfiguration.fields.includes(e.handle)),selectedOptionsByFieldHandle(t,e){const i={};return e.selectedFields.forEach(e=>{i[e.handle]=[],e.values.forEach(s=>{t.variantConfiguration.values.includes(s.value)&&i[e.handle].push(s)})}),i},fieldValuesByHandle(t){const e={};return t.variantConfigurationTypeFields.forEach(t=>{e[t.handle]=t.values.map(({value:t})=>t)}),e},optionValuesById(t){const e={};return t.variantConfigurationTypeFields.forEach(t=>{t.values.forEach(t=>{e[t.value]=t.label})}),e},selectedOptionValuesByFieldHandle(t,e){const i={};return e.selectedFields.forEach(e=>{i[e.handle]=[],e.values.forEach(s=>{t.variantConfiguration.values.includes(s.value)&&i[e.handle].push(s.value)})}),i},currentStepState:(t,e)=>e.stepState(t.step),stepState:(t,e)=>t=>{switch(t){case 0:default:return b.indexStep;case 1:return b.nameStep;case 2:return b.fieldsStep;case 3:return b.valuesStep;case 4:return b.settingsStep;case 5:return b.generateStep}},defaultSettings:()=>N}}),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"body"},[i("div",{staticClass:"content-summary"},[i("AppHeader",{attrs:{title:t.state.header.title,subtitle:t.state.header.subtitle}})],1),t._v(" "),t.isLoading?i("AppLoading"):t._e(),t._v(" "),t.isLoading?t._e():i(t.state.component,{tag:"component"})],1),t._v(" "),i("AppFooter",{attrs:{isLoading:t.isLoading,isSubmitting:t.isSubmitting,isCompleted:t.isCompleted,priBtnText:t.state.footer.priBtnText,secBtnText:t.state.footer.secBtnText,step:t.step},on:{"close-modal":t.handleCloseModal}})],1)};w._withStripped=!0;var R=function(){var t=this.$createElement;this._self._c;return this._m(0)};R._withStripped=!0;var P={},U=i("KHd+"),B=Object(U.a)(P,R,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex","align-items":"center"}},[this._v("\n  Loading...\n  "),e("span",{staticClass:"spinner"})])}],!1,null,null,null);B.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/AppLoading.vue";var G=B.exports,k=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[this._v("\n    "+this._s(this.title)+"\n  ")]),this._v(" "),e("p",{staticStyle:{"margin-bottom":"2rem !important"}},[this._v("\n    "+this._s(this.subtitle)+"\n  ")])])};k._withStripped=!0;var L={props:{title:String,subtitle:String}},D=Object(U.a)(L,k,[],!1,null,null,null);D.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/AppHeader.vue";var H=D.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"footer"},[t.step>0?i("div",{staticClass:"buttons left"},[i("button",{staticClass:"btn icon nav",on:{click:t.menuStep}},[t._v("Menu")])]):t._e(),t._v(" "),t.isCompleted?i("div",{staticClass:"buttons right"},[i("button",{staticClass:"btn submit",on:{click:function(e){return t.$emit("close-modal")}}},[t._v("Finish")])]):i("div",{staticClass:"buttons right"},[i("button",{staticClass:"btn",on:{click:t.handleSecBtnClick}},[t._v("\n      "+t._s(t.secBtnText)+"\n    ")]),t._v(" "),i("button",{staticClass:"btn submit",class:{disabled:t.isLoading,add:t.isSubmitting,icon:t.isSubmitting,loading:t.isSubmitting},attrs:{disabled:t.isLoading||t.isSubmitting},on:{click:t.nextStep}},[t._v("\n      "+t._s(t.priBtnText)+"\n    ")])])])};M._withStripped=!0;var q={props:{isLoading:Boolean,isSubmitting:Boolean,isCompleted:Boolean,priBtnText:String,secBtnText:String,step:Number},methods:{...Object(a.b)(["nextStep","prevStep","menuStep"]),handleSecBtnClick(){0===this.step?this.$emit("close-modal"):this.prevStep()}}},Y=Object(U.a)(q,M,[],!1,null,null,null);Y.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/AppFooter.vue";var J=Y.exports,X=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("table",{ref:"table",staticClass:"display",attrs:{id:"variant_configurations"}},[this._m(0),this._v(" "),e("tbody")])])};X._withStripped=!0;var z={data:()=>({dt:null}),computed:Object(a.e)({variantConfigurations:t=>t.variantConfigurations,dtData(){const t=[];return this.variantConfigurations.forEach(e=>{const i=null==e.dateUpdated?null:new Date(e.dateUpdated).toLocaleDateString();t.push([e.id,e.title,"TBD",i])}),t}}),created(){A.once("form-submission",this.createNewVariantConfiguration)},mounted(){const t=this;this.$nextTick(()=>{this.dt=$(this.$refs.table).DataTable({data:this.dtData,columnDefs:[{targets:[0],visible:!1,searchable:!1}]}),$(".dataTable").on("click","tbody tr",(function(){const e=t.dt.row(this).data();t.clearFormErrors(),t.setCurrentVariantConfigurationById(e[0])}))})},methods:{...Object(a.b)(["setCurrentVariantConfigurationById","createNewVariantConfiguration","clearFormErrors"])},beforeDestroy(){this.dt.destroy(),A.off("form-submission",this.createNewVariantConfiguration)}},K=Object(U.a)(z,X,[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("ID")]),this._v(" "),e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Number of Variants")]),this._v(" "),e("th",[this._v("Last Updated")])])])}],!1,null,null,null);K.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/IndexStep.vue";var W=K.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"field width-100"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"input ltr",class:{errors:t.errors.title}},[i("textarea",{staticClass:"nicetext text",staticStyle:{"min-height":"32px"},attrs:{id:"configuration-name",name:"title",rows:"1",cols:"50",placeholder:""},on:{input:function(e){return t.handleInput(e.target.value)}}},[t._v(t._s(t.title))]),t._v(" "),t.errors.title?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors.title))])]):t._e()])])};Z._withStripped=!0;var Q={computed:Object(a.e)({title:t=>t.variantConfiguration.title,errors:t=>t.formErrors}),methods:{...Object(a.d)({setTitle:"SET_VARIANT_CONFIGURATION_TITLE"}),...Object(a.b)(["validate"]),async handleInput(t){const{rules:e}=h;await this.validate({values:{title:t},schema:e}),this.setTitle(t)}}},tt=Object(U.a)(Q,Z,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading"},[e("label",{attrs:{for:"configuration-name"}},[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"instructions",attrs:{id:"configuration-name-instructions"}},[e("p",[this._v('Give your configuration a name e.g. "Accent Colours"')])])}],!1,null,null,null);tt.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/NameStep.vue";var et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field width-100"},[i("div",{staticClass:"heading"},[i("label",{attrs:{for:"configuration-fields"}},[t._v("Fields\n      "),i("a",{staticStyle:{"font-size":"11px","font-weight":"normal","margin-left":"2px"},attrs:{href:"#"},on:{click:t.toggleAllSelectedFields}},[t._v(t._s(t.isAllSelected?"Unselect all":"Select all"))])])]),t._v(" "),i("div",{staticClass:"input ltr",class:{errors:t.errors.fields}},[i("fieldset",{staticClass:"checkbox-group"},t._l(t.fields,(function(e){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.variantFields,expression:"variantFields"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"fields[]",id:"fields-"+e.handle},domProps:{value:e.handle,checked:Array.isArray(t.variantFields)?t._i(t.variantFields,e.handle)>-1:t.variantFields},on:{change:function(i){var s=t.variantFields,a=i.target,n=!!a.checked;if(Array.isArray(s)){var r=e.handle,l=t._i(s,r);a.checked?l<0&&(t.variantFields=s.concat([r])):l>-1&&(t.variantFields=s.slice(0,l).concat(s.slice(l+1)))}else t.variantFields=n}}}),t._v(" "),i("label",{attrs:{for:"fields-"+e.handle}},[t._v("\n          "+t._s(e.name)+"\n        ")])])})),0),t._v(" "),t.errors.fields?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors.fields))])]):t._e()])])};it._withStripped=!0;var st={computed:{...Object(a.e)({fields:t=>t.variantConfigurationTypeFields,errors:t=>t.formErrors}),...Object(a.c)({isAllSelected:"isAllFieldsSelected"}),variantFields:{get(){return this.$store.state.variantConfiguration.fields},async set(t){const{rules:e}=_;await this.validate({values:{fields:t},schema:e}),this.setFields(t)}}},methods:{...Object(a.d)({setFields:"SET_VARIANT_CONFIGURATION_FIELDS"}),...Object(a.b)(["toggleAllSelectedFields","validate"])}},at=Object(U.a)(st,it,[],!1,null,null,null);at.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/FieldsStep.vue";var nt=at.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.selectedFields,(function(e){return i("div",{staticClass:"field width-100"},[i("div",{staticClass:"heading"},[i("label",{attrs:{for:"configuration-fields"}},[t._v(t._s(e.name)+"\n        "),i("a",{staticStyle:{"font-size":"11px","font-weight":"normal","margin-left":"2px"},attrs:{href:"#"},on:{click:function(i){return t.handleToggleValues(e.handle)}}},[t._v(t._s(t.isAllSelected(e.handle)?"Unselect all":"Select all"))])])]),t._v(" "),i("div",{staticClass:"input ltr",class:{errors:t.errors.values}},[i("fieldset",{staticClass:"checkbox-group",staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(e.values,(function(e){var s=e.label,a=e.value;return i("div",{staticStyle:{width:"25%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"checkbox",attrs:{type:"checkbox",id:"fields-"+a,name:"fields[]"},domProps:{value:a,checked:Array.isArray(t.values)?t._i(t.values,a)>-1:t.values},on:{change:function(e){var i=t.values,s=e.target,n=!!s.checked;if(Array.isArray(i)){var r=a,l=t._i(i,r);s.checked?l<0&&(t.values=i.concat([r])):l>-1&&(t.values=i.slice(0,l).concat(i.slice(l+1)))}else t.values=n}}}),t._v(" "),i("label",{attrs:{for:"fields-"+a}},[t._v("\n            "+t._s(s)+"\n          ")])])})),0),t._v(" "),t.errors.values?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors.values))])]):t._e()])])})),0)};rt._withStripped=!0;var lt={computed:{...Object(a.e)({fields:t=>t.variantConfigurationTypeFields,errors:t=>t.formErrors,variantValues:t=>t.variantConfiguration.values,variantFields:t=>t.variantConfiguration.fields}),...Object(a.c)({selectedFields:"selectedFields",isAllSelected:"isAllValuesSelected"}),values:{get(){return this.variantValues},async set(t){await this.isValid(t),this.setValues(t)}}},methods:{...Object(a.b)(["toggleAllSelectedValues","validate"]),...Object(a.d)({setValues:"SET_VARIANT_CONFIGURATION_VALUES"}),handleToggleValues(t){this.toggleAllSelectedValues(t),this.isValid(this.variantValues)},async isValid(t){const{rules:e}=m;return await this.validate({values:{values:t},schema:e})}}},ot=Object(U.a)(lt,rt,[],!1,null,null,null);ot.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/ValuesStep.vue";var ct=ot.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.types,(function(e,s){return i("div",[i("AppSettings",{attrs:{type:e}}),t._v(" "),s<t.types.length-1?i("hr"):t._e()],1)})),0)};dt._withStripped=!0;var ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field"},[i("div",{staticClass:"heading"},[i("label",[t._v(t._s(t.typeTitle))]),t._v(" "),i("div",{staticClass:"instructions"},[t._v("\n      "+t._s(t.typeInstructions)+"\n    ")])]),t._v(" "),i("div",{staticClass:"input ltr"},[i("fieldset",[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.method,expression:"method"}],staticClass:"radio",attrs:{type:"radio",id:"settings-"+t.type+"-all",name:"settings["+t.type+"][method]",value:"all"},domProps:{checked:t._q(t.method,"all")},on:{change:function(e){t.method="all"}}}),t._v(" "),i("label",{attrs:{for:"settings-"+t.type+"-all"}},[t._v("Set "+t._s(t.typeTitle)+" for all variants")])]),t._v(" "),"all"===t.method?i("div",{staticClass:"field",staticStyle:{"margin-left":"32px"}},[i("div",{staticClass:"heading"},[i("label",[t._v(t._s(t.typeTitle))])]),t._v(" "),i("div",{staticClass:"input ltr"},["price"===t.type?i("div",{staticClass:"flex"},[i("div",[t._v("$")]),t._v(" "),i("input",{staticClass:"nicetext text",attrs:{type:"text"},domProps:{value:t.values.value},on:{input:function(e){return t.setFieldValue("value",e.target.value)}}})]):i("input",{staticClass:"nicetext text",attrs:{type:"text"},domProps:{value:t.values.value},on:{input:function(e){return t.setFieldValue("value",e.target.value)}}})]),t._v(" "),t.errors["settings."+t.type+".values.value"]?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors["settings."+t.type+".values.value"]))])]):t._e()]):t._e(),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.method,expression:"method"}],staticClass:"radio",attrs:{type:"radio",id:"settings-"+t.type+"-field",name:"settings["+t.type+"][method]",value:"field"},domProps:{checked:t._q(t.method,"field")},on:{change:function(e){t.method="field"}}}),t._v(" "),i("label",{attrs:{for:"settings-"+t.type+"-field"}},[t._v("Set "+t._s(t.typeTitle)+" per field")])]),t._v(" "),"field"===t.method?i("div",{staticClass:"field",staticStyle:{"margin-left":"32px"}},[t._m(0),t._v(" "),i("div",{staticClass:"input ltr"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.field,expression:"field"}],attrs:{name:"",id:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.field=e.target.multiple?i:i[0]}}},[i("option",{domProps:{value:null}},[t._v("Select")]),t._v(" "),t._l(t.selectedFields,(function(e){return t.selectedValuesByHandle[e.handle].length?i("option",{domProps:{value:e.handle}},[t._v("\n              "+t._s(e.name)+"\n            ")]):t._e()}))],2)]),t._v(" "),t.errors["settings."+t.type+".field"]?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors["settings."+t.type+".field"]))])]):t._e(),t._v(" "),t._l(t.selectedValuesByHandle[t.field],(function(e){var s=e.label,a=e.value;return t.field?i("div",{staticClass:"field"},[i("div",{staticClass:"heading"},[i("label",[t._v(t._s(s))])]),t._v(" "),i("div",{staticClass:"input ltr"},["price"===t.type?i("div",{staticClass:"flex"},[i("div",[t._v("$")]),t._v(" "),i("input",{staticClass:"nicetext text",attrs:{type:"text"},domProps:{value:t.values[a]},on:{input:function(e){return t.setFieldValue(a,e.target.value)}}})]):i("input",{staticClass:"nicetext text",attrs:{type:"text"},domProps:{value:t.values[a]},on:{input:function(e){return t.setFieldValue(a,e.target.value)}}})]),t._v(" "),t.errors["settings."+t.type+".values."+a]?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors["settings."+t.type+".values."+a]))])]):t._e()]):t._e()}))],2):t._e(),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.method,expression:"method"}],staticClass:"radio",attrs:{type:"radio",id:"settings-"+t.type+"-skip",name:"settings["+t.type+"][method]",value:"skip"},domProps:{checked:t._q(t.method,"skip")},on:{change:function(e){t.method="skip"}}}),t._v(" "),i("label",{attrs:{for:"settings-"+t.type+"-skip"}},[t._v("Skip "+t._s(t.typeTitle))])])]),t._v(" "),t.errors["settings."+t.type+".method"]?i("ul",{staticClass:"errors"},[i("li",[t._v(t._s(t.errors["settings."+t.type+".method"]))])]):t._e()])])};ut._withStripped=!0;var pt={props:{type:{type:String,required:!0}},computed:{...Object(a.e)({variantSettings(t){return t.variantConfiguration.settings[this.type]||this.defaultSettings},errors:t=>t.formErrors}),...Object(a.c)({defaultSettings:"defaultSettings",selectedFields:"selectedFields",selectedValuesByHandle:"selectedOptionsByFieldHandle"}),typeTitle(){const t=Craft.t("craft-commerce-untitled",this.type);return t.charAt(0).toUpperCase()+t.slice(1)},typeInstructions(){switch(this.type){case"sku":return`Use ${this.templateVars} to dynamically set ${this.typeTitle} from field values`;default:return""}},templateVars(){return this.selectedFields.map(t=>`{${t.handle}}`).join(", ")},method:{get(){return this.variantSettings.method},async set(t){const e={...this.variantSettings,method:t};this.setSettingsType({type:this.type,data:e})}},field:{get(){return this.variantSettings.field},async set(t){const e={...this.variantSettings,field:t};this.setSettingsType({type:this.type,data:e})}},values:{get(){return this.variantSettings.values},async set(t){const e={...this.variantSettings,values:t};this.setSettingsType({type:this.type,data:e})}}},methods:{...Object(a.b)(["validate"]),...Object(a.d)({setSettingsType:"SET_VARIANT_CONFIGURATION_SETTINGS_TYPE"}),setFieldValue(t,e){const i={},s=this.variantSettings.values;null==e||""==e?delete s[t]:i[t]=e;const a={...this.variantSettings,values:{...s,...i}};this.setSettingsType({type:this.type,data:a})}}},vt=Object(U.a)(pt,ut,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading"},[e("label",[this._v("Choose a field")])])}],!1,null,null,null);vt.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/AppSettings.vue";var ft=vt.exports,ht={created(){A.once("form-submission",this.saveVariantConfiguration)},computed:{types:()=>d},methods:{...Object(a.b)(["saveVariantConfiguration"])},beforeDestroy(){A.off("form-submission",this.saveVariantConfiguration)},components:{AppSettings:ft}},_t=Object(U.a)(ht,dt,[],!1,null,null,null);_t.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/SettingsStep.vue";var mt=_t.exports,gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isGenerating?i("div",[i("h2",[t._v("Hold Tight!")]),t._v(" "),t._m(2)]):i("div",[i("h2",{staticStyle:{"margin-bottom":"5px"}},[t._v("Config Summary")]),t._v(" "),i("div",{staticStyle:{"margin-bottom":"16px"}},[t._v("The following config will be saved:")]),t._v(" "),i("div",{staticClass:"field",staticStyle:{"margin-bottom":"16px 0"}},[t._m(0),t._v(" "),i("div",{staticStyle:{"margin-bottom":"16px"}},[t._v(t._s(t.variantConfiguration.title))]),t._v(" "),t._l(t.selectedFields,(function(e){return i("div",[i("div",{staticStyle:{"margin-bottom":"5px","font-weight":"bold",color:"#606d7b"}},[t._v("\n        "+t._s(e.name)+"\n      ")]),t._v(" "),i("ul",{staticStyle:{margin:"0 0 16px 16px","list-style-type":"disc"}},t._l(t.selectedOptionsByFieldHandle[e.handle],(function(e){var s=e.label;e.value;return i("li",[t._v("\n          "+t._s(s)+"\n        ")])})),0)])})),t._v(" "),t._m(1),t._v(" "),t._l(t.types,(function(e){return i("ul",{staticStyle:{margin:"0 0 0 16px","list-style-type":"disc"}},["all"===t.variantConfiguration.settings[e].method?i("li",[t._v("\n        "+t._s(t.getTitle(e))+" - "+t._s("price"===e?"$":"")+t._s(t.variantConfiguration.settings[e].values.value)+"\n        for all variants\n      ")]):t._e(),t._v(" "),"field"===t.variantConfiguration.settings[e].method?[i("li",[t._v(t._s(t.getTitle(e))+" - Per field")]),t._v(" "),i("ul",{staticStyle:{"margin-left":"16px","list-style-type":"revert"}},t._l(t.variantConfiguration.settings[e].values,(function(s,a){return"value"!==a?i("li",[t._v("\n            "+t._s(t.optionValuesById[a])+" - "+t._s("price"===e?"$":"")+t._s(s)+"\n          ")]):t._e()})),0)]:t._e(),t._v(" "),"skip"===t.variantConfiguration.settings[e].method?i("li",[t._v("\n        "+t._s(t.getTitle(e))+" - Skipped\n      ")]):t._e()],2)}))],2)])};gt._withStripped=!0;var St={data:()=>({isGenerating:!1}),computed:{...Object(a.e)({variantConfiguration:t=>t.variantConfiguration}),...Object(a.c)(["selectedFields","selectedOptionsByFieldHandle","fieldValuesByHandle","optionValuesById"]),types:()=>d},created(){A.once("form-submission",this,this.handleGenerateVariants)},beforeDestroy(){A.off("form-submission",this.handleGenerateVariants)},methods:{...Object(a.b)(["generateVariants"]),...Object(a.d)({setIsCompleted:"SET_IS_COMPLETED"}),getTitle:(t="")=>t.charAt(0).toUpperCase()+t.slice(1),async handleGenerateVariants(){await this.generateVariants(this.variantConfiguration.id),this.setIsCompleted(),this.isGenerating=!0}}},yt=Object(U.a)(St,gt,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading"},[e("label",[this._v("Title")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading"},[e("label",[this._v("Settings")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n    Please wait while your variants are generated."),e("br"),this._v("\n    This can take several minutes and you can monitor progress on the queue\n    jobs page.\n  ")])}],!1,null,null,null);yt.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/Steps/GenerateStep.vue";var Tt=yt.exports,bt={props:{productId:Number,productTypeId:Number,variantConfigurationTypeId:Number,$modal:Object},computed:{...Object(a.e)({isLoading:t=>t.ui.isLoading,isSubmitting:t=>t.ui.isSubmitting,isCompleted:t=>t.ui.isCompleted,step:t=>t.step}),...Object(a.c)({state:"currentStepState"})},async created(){this.setIsLoading(!0),this.setProductId(this.productId),this.setProductTypeId(this.productTypeId),this.setTypeId(this.variantConfigurationTypeId),await this.fetchVariantConfigurations({productId:this.productId}),await this.fetchVariantConfigurationTypeFields({productTypeId:this.productTypeId}),this.setIsLoading(!1)},methods:{...Object(a.b)(["fetchVariantConfigurations","fetchVariantConfigurationTypeFields"]),...Object(a.d)({setIsLoading:"SET_IS_LOADING",setProductId:"SET_PRODUCT_ID",setProductTypeId:"SET_PRODUCT_TYPE_ID",setTypeId:"SET_TYPE_ID"}),handleCloseModal(){this.$modal.hide()}},components:{AppLoading:G,AppHeader:H,AppFooter:J,IndexStep:W,NameStep:et,FieldsStep:nt,ValuesStep:ct,SettingsStep:mt,GenerateStep:Tt}},Ct=Object(U.a)(bt,w,[],!1,null,null,null);Ct.options.__file="src/assetbundles/craftcommerceuntitled/src/js/components/App.vue";var It=Ct.exports;!function(t){Craft.CommerceUntitled=Garnish.Base.extend({settings:{productId:null,productTypeId:null,variantConfigurationTypeId:null},init(e){this.settings=t.extend({},Craft.CommerceUntitled.defaults,e),this.initEditBtn(),this.initDataTables()},initEditBtn(){const e=t(this.getEditBtnHtml());t("#header").find(".btngroup").before(e),e.on("click",t=>{t.preventDefault(),new Craft.VariantConfigurationModal({productId:this.settings.productId,productTypeId:this.settings.productTypeId,variantConfigurationTypeId:this.settings.variantConfigurationTypeId})})},initDataTables(){const e=this.settings.productId;t("#configurable-variants").DataTable({pageLength:"25",serverMethod:"post",ajax:"https://www.naturalpaintco001.batch/craft-commerce-untitled/api/v1/variants?productId="+e})},getEditBtnHtml:()=>'<button class="btn secondary">Edit Configurations</button>'}),Craft.VariantConfigurationModal=Garnish.Modal.extend({settings:{productId:null,productTypeId:null,variantConfigurationTypeId:null},closeOtherModals:!0,shadeClass:"modal-shade dark",init(e){this.setSettings(e,Craft.VariantConfigurationModal.defaults),this.$container=t('<div class="modal elementselectormodal">\n          <div id="variant-configuration-modal-container" style="height: 100%; overflow-y: auto; overscroll-behavior: contain;">\n            <div id="variant-configuration-app" />\n          </div>\n        </div>').appendTo(Garnish.$bod);const i=new s.a({el:"#variant-configuration-app",store:x,render:t=>t(It,{props:{productId:this.settings.productId,productTypeId:this.settings.productTypeId,variantConfigurationTypeId:this.settings.variantConfigurationTypeId,$modal:this}})});this.on("hide",()=>{i.$destroy(),x.dispatch("resetForm")}),this.base(this.$container,e)}})}(jQuery)}},[["ZpdD",1,2]]]);